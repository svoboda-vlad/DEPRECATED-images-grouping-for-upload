<h2>Grouping Images</h2>
<p>Get access token to Google Photos from: <a href="https://developers.google.com/oauthplayground" target="_blank">OAuth 2.0 Playground</a></p>
<p>Authorize APIs:</p>
<p>https://www.googleapis.com/auth/photoslibrary.appendonly</p>
<form [formGroup]="uploadForm">
  <label for="accessToken">Access Token (from OAuth 2.0 Playground)</label><br/>
  <input id="accessToken" type="text" formControlName="accessToken"/>
</form>
<input #file type="file" accept='image/*' (change)="processFiles(file.files)" multiple/>
<p *ngIf="files.length > 0">{{files.length}} files in total</p>
<p *ngIf="getUniqueFilesCount() > 0">{{getUniqueFilesCount()}} files without duplicates in {{filesGroups.length}} groups</p>

<table *ngIf="filesGroups.length > 0">
  <th>Group</th>
  <th>Files</th>
  <th>Days</th>
  <tr *ngFor="let group of filesGroups">
    <td #groupName contenteditable (blur)="updateGroupName(group, groupName.textContent)">{{ group.name }}</td>
    <td>{{ group.getCountWithoutDuplicates() }}</td>
    <td>{{ getDaysDiffFromToday(group.startTime) }}</td>
  </tr>
</table>
<p></p>
<div *ngFor="let group of filesGroups">
  <div><b>{{ group.name }} - {{ group.getCountWithoutDuplicates() }} unique files (of {{ group.sequence.length }})</b></div>
  <div class="group">
    <div class="file" *ngFor="let seq of group.sequence">
      {{ seq.file.dateTime | date:'HH:mm:ss' }}<br/>
      <img class="img" [ngClass]="{'img-duplicate': seq.isDuplicate === 'Y'}" [src]="seq.file.imageContent"><br/>
      <button (click)="changeIsDuplicate(group, seq)">{{seq.isDuplicate === 'Y' ? 'Add' : 'Remove'}}</button>
    </div>
  </div>
</div>
<button (click)="createMedia()">Upload file</button>
